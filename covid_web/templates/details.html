{% extends "base_template.html" %}

{% block title %}<title>Covid19 Tracker Country</title>{% endblock %}

{% block navbar %}
  <nav class="navbar navbar-expand-md navbar-light bg-light" style="padding:1%">
      <a class="navbar-brand" href="#">
        {% load static %}
        <img src="{% static 'images/infection2.png' %}" width="30" height="30" alt="">
      </a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav">
          <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav mr-auto">
              <li class="nav-item">
                  Welcome <b>{{ user.get_username }}</b> Location: <b>{{user_location}}</b> IP: <b>{{ip}}</b>
              </li>
          </ul>
          <ul class="navbar-nav">
              <li class="nav-item">
                  <a class="nav-link" href="{% url 'logout' %}" ><b>Logout</b></a>
              </li>
          </ul>
      </div>
  </nav>
{% endblock %}
{% block content %}
    <div class="container-fluid p-4">
        <div class="row">
            <div class="col-sm p-3">
                <h2>Covid Map</h2>
                <script async defer
                    src="https://maps.googleapis.com/maps/api/js?=AIzaSyDr-eXifZSnrqd9SPpoG4qYj1Owg6X5eRE">
                </script>
                </head>
                <body onload ='start()'>
                    <div id='main' style='min-width: 200px;
                    width: 100%;
                    min-height: 200px;
                    height: 90%;
                    border: 1px solid blue; '>
                    </div>
                    <script>
                        var first = null
                        function start(){ 
                            var main = document.getElementById('main')
                            var data = { zoom: 6, center: {lat:14, lng:100}}
                            first = new google.maps.Map(main, data)
                            new google.maps.Marker({map: first, position:{lat:13.755824,lng:100.567428 }})
                        }
                    </script>
                <br>
                <a class="btn btn-info" href="{% url 'prevent' %}" style="color:white; width:100px">Info</a>
            </div>

            <div class="col">
                <div class="container bg-light p-5">
                    <h2><b>Welcome to Covid-19 Tracker</b></h2>
                    <div class="row pt-2">
                            <form action="/country">
                                <h3>Your Location: {{user_location}}</h3>
                                <h3 style='color: red'> Let's find your interesting area</h3>
                                {% if error_warning %} <h3 style='color: red'> Can't find your country </h3> {%endif%}
                                
                                <a><strong>Please search your country: </strong></a><br>
                                <div class="row p-4">
                                    <div class="col">
                                        <input list="contries" name="country" id="country" class=" custom-select custom-select-sm">
                                        <datalist id="contries">
                                            {% for country in country_name %}
                                            {% if name == country %}
                                                <option value="{{country}}" selected>{{country}}</option>
                                            {%else%}
                                                <option value="{{country}}">{{country}}</option>
                                            {%endif%}
                                            {%endfor%}
                                        </datalist>
                                    </div>
                                    <div class="col">
                                        <button type="submit" class="btn btn-success float-left"><b>Submit</b></button>
                                    </div>
                                </div>
                            </form>
                            <div class="detail" style="padding: 1px; font-size: 1.50rem;">
                                <p><span id="date" class="text-dark" style="font-size:1rem"></span>{{user_location}}</p>
                                <script>
                                    dt = new Date();
                                    y = dt.getFullYear();
                                    m = dt.getMonth() + 1;
                                    d = dt.getDate();
                                    document.getElementById("date").innerHTML = y + "-" + m + "-" + d;
                                </script>
                                {% if name != '' %} <p>Country: <b>{{name}}</b> </p>{%endif%}
                                <p> Total Confirm Cases : <span class="text-danger"><strong>{{totalconfirm}}</strong></span></p>
                                <p> New Confirm Cases : <span class="text-danger"><strong>{{newconfirm}}</strong></span></p>
                                <p> New Deaths : <span class="text-dark"><strong>{{newdeaths}}</strong></span></p>
                                <p> Total Deaths : <span class="text-mudarkted"><strong>{{totaldeaths}}</strong></span></p>
                                <p> Recovered : <span class="text-success"><strong>{{recovered}}</strong></span></p>
                                <p> Today Recovered : <span class="text-success"><strong>{{todayRecovered}}</strong></span></p>
                                <p> Active Cases : <span class="text-warning"><strong>{{active}}</strong></span></p>


                                <div class="row pt-3">
                                </div>
                            </div>
                        </div>
                        <div class="col pt-2">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}